- id ||= nil
- type ||= (defined?(upload_type)) ? (upload_type) : (nil)
- action ||= url_for(action: 'upload')
- name ||= 'files[]'
- tooltip ||= t('.tooltip')
- button_text ||= t('.button')

- input_id = "#{id}_file_input"

%div{ id: id, 'data-concerns' => 'uploadForm', 'data-concerns-options' => { action: action, type: type }.to_json }
  
  %div.form-group
    %div.col-md-4.col-md-offset-4{ data: { toggle: "tooltip", title: tooltip, placement: "right" } }
      %div.btn.btn-default.fileinput-button
        %i.glyphicon.glyphicon-plus
        %span= button_text
        %input{ id: input_id, multiple: "multiple", name: name, type: "file"}

  %div.form-group
    %div.col-md-12
      %div.progress.progress-striped.active{"aria-valuemax" => "100", "aria-valuemin" => "0", role: "progressbar"}
        %span.progress-bar.progress-bar-default{style: "width:0%;"}

  %div.form-group.collapse{ data: { uploads: 'status' } }
    %div.col-md-12
      %table.table.table-striped
        %tbody.files
      %div.col-md-3.btn.btn-default{ data: { uploads: 'clean-status' }}
        = t('.clean_status')

= render 'concerns/uploads/templates'
